<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Integral Dasar - Matematika Tingkat Lanjut">
    <title>Integral Dasar - Media Belajar Daffa</title>
    <link rel="stylesheet" href="../matematika-wajib/style.css">
    <style>
        /* Fraction Styles */
        .fraction {
            display: inline-flex; flex-direction: column;
            align-items: center; vertical-align: middle;
            margin: 0 4px; font-family: var(--font-display);
        }
        .fraction-numerator { padding: 2px 8px; font-size: 1rem; line-height: 1.3; }
        .fraction-line { width: 100%; height: 2px; background: var(--text-primary); border-radius: 1px; }
        .fraction-denominator { padding: 2px 8px; font-size: 1rem; line-height: 1.3; }
        .formula-box .fraction { background: var(--bg-card); padding: 8px 12px; border-radius: var(--radius-sm); margin: 0 8px; }
        .formula-box .fraction-line { background: var(--accent-primary); }

        /* Integral Sign Styles */
        .integral-sign {
            font-family: 'Times New Roman', serif;
            font-size: 2.5rem;
            line-height: 1;
            margin: 0 5px;
            vertical-align: middle;
        }
        .integral-limits {
            display: inline-flex; flex-direction: column;
            align-items: center;
            vertical-align: middle;
            font-size: 0.8rem;
            font-family: sans-serif;
            margin-right: 5px;
        }

        /* Graph Styles */
        .graph-stage {
            background: var(--bg-secondary); border-radius: var(--radius-lg);
            padding: 20px; margin: 20px 0; position: relative;
        }
        .graph-svg { width: 100%; height: auto; min-height: 300px; background: var(--bg-card); border-radius: var(--radius-md); }
        .grid-line { stroke: var(--border-light); stroke-width: 0.5; }
        .axis { stroke: var(--text-muted); stroke-width: 1.5; }
        .func-line { fill: none; stroke: var(--accent-primary); stroke-width: 2.5; }
        .riemann-rect {
            fill: rgba(52, 152, 219, 0.4);
            stroke: #3498db;
            stroke-width: 0.5;
            transition: d 0.1s;
        }
        .area-exact { fill: rgba(46, 204, 113, 0.2); }
        
        .result-box {
            background: var(--bg-card);
            border-left: 4px solid var(--success);
            padding: 15px;
            margin-top: 15px;
            border-radius: 0 var(--radius-md) var(--radius-md) 0;
        }
        .result-row { display: flex; justify-content: space-between; margin-bottom: 5px; }
        .result-label { color: var(--text-muted); }
        .result-val { font-weight: bold; font-family: var(--font-display); }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-inner">
                <div class="logo">
                    <svg class="logo-icon" viewBox="0 0 40 40" fill="none">
                        <rect x="4" y="8" width="32" height="24" rx="2" stroke="currentColor" stroke-width="2"/>
                        <path d="M4 14h32" stroke="currentColor" stroke-width="2"/>
                        <circle cx="10" cy="11" r="2" fill="currentColor"/>
                        <circle cx="16" cy="11" r="2" fill="currentColor"/>
                        <rect x="8" y="18" width="24" height="2" rx="1" fill="currentColor" opacity="0.5"/>
                    </svg>
                    <span class="logo-text">Media Belajar Daffa</span>
                </div>
                <button class="theme-toggle" id="themeToggle" aria-label="Toggle tema">
                    <svg class="sun-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><path d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
                    <svg class="moon-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                </button>
            </div>
        </header>

        <main class="main-content">
            <div class="container">
                <div class="page-header">
                    <nav class="breadcrumb">
                        <a href="../index.html">Beranda</a><span>/</span>
                        <a href="index.html">Matematika Lanjut</a><span>/</span>
                        <span class="current">Integral Dasar</span>
                    </nav>
                    <div class="accent-line"></div>
                    <h1 class="page-title">Integral Dasar</h1>
                    <p class="page-subtitle">Memahami konsep anti-turunan, integral tentu, dan aplikasinya dalam menghitung luas daerah.</p>
                </div>

                <div class="nav-btn-group">
                    <a href="index.html" class="nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg> Kembali ke Daftar Materi</a>
                    <a href="../index.html" class="nav-btn"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/><polyline points="9 22 9 12 15 12 15 22"/></svg> Beranda</a>
                </div>

                <nav class="quick-nav" id="quickNav">
                    <a href="#materi-inti" class="quick-nav-btn">Materi</a>
                    <a href="#animasi-interaktif" class="quick-nav-btn">Animasi</a>
                    <a href="#contoh-soal" class="quick-nav-btn">Contoh Soal</a>
                    <a href="#latihan-soal" class="quick-nav-btn">Latihan</a>
                    <a href="#kuis" class="quick-nav-btn">Kuis</a>
                </nav>

                <!-- Material Content -->
                <section class="content-section" id="materi-inti">
                    <div class="section-header"><h2 class="section-title">Materi Inti</h2></div>
                    <div class="material-content">
                        <h3>1. Konsep Integral</h3>
                        <p>Integral adalah kebalikan (invers) dari operasi diferensiasi (turunan). Integral juga sering disebut <strong>anti-turunan</strong>.</p>

                        <h3>2. Integral Tak Tentu</h3>
                        <p>Integral tak tentu adalah keluarga fungsi yang memiliki turunan sama.</p>
                        <div class="formula-box">
                            <div class="formula">∫ f(x) dx = F(x) + C</div>
                            <div style="margin-top:5px;">Keterangan: F(x) adalah anti-turunan, C adalah konstanta.</div>
                        </div>

                        <h4>Rumus Dasar:</h4>
                        <div class="formula-box">
                            <div class="formula">∫ x<sup>n</sup> dx = <span class="fraction"><span class="fraction-numerator">x<sup>n+1</sup></span><span class="fraction-line"></span><span class="fraction-denominator">n+1</span></span> + C, n ≠ -1</div>
                        </div>

                        <h3>3. Integral Tentu</h3>
                        <p>Integral tentu menghasilkan suatu nilai bilangan (bukan fungsi). Digunakan untuk menghitung luas, volume, dll.</p>
                        <div class="formula-box">
                            <div class="formula">∫<sub>a</sub><sup>b</sup> f(x) dx = F(b) - F(a)</div>
                        </div>

                        <h3>4. Teknik Integral Substitusi</h3>
                        <p>Digunakan untuk mengintegralkan fungsi komposit. Misal u = g(x), maka du = g'(x) dx.</p>
                        <div class="formula-box">
                            <div class="formula">∫ f(u) u' dx = ∫ f(u) du</div>
                        </div>

                        <h3>5. Luas Daerah</h3>
                        <p>Luas daerah yang dibatasi kurva y = f(x), sumbu X, dan garis x=a, x=b adalah:</p>
                        <div class="formula-box">
                            <div class="formula">L = ∫<sub>a</sub><sup>b</sup> f(x) dx</div>
                            <div style="margin-top:5px;">(Berlaku jika f(x) ≥ 0 pada interval [a,b]).</div>
                        </div>
                    </div>
                </section>

                <!-- Interactive Animations -->
                <section class="content-section" id="animasi-interaktif">
                    <div class="section-header"><h2 class="section-title">Visualisasi Integral Tentu (Riemann Sum)</h2></div>

                    <div class="animation-container">
                        <div class="animation-header"><span class="animation-title">Luas Daerah di Bawah Kurva y = x²</span></div>
                        <p style="font-size:0.9rem; color:var(--text-muted); text-align:center; margin-bottom:10px;">
                            Geser slider untuk mengubah jumlah partisi (n). Semakin banyak kotak, semakin mendekati luas sesungguhnya.
                        </p>
                        
                        <div class="graph-stage">
                            <div class="slider-control">
                                <span class="slider-label">Jumlah Partisi (n):</span>
                                <input type="range" class="slider-input" id="riemannN" min="1" max="100" step="1" value="5">
                                <span class="slider-value" id="valN">5</span>
                            </div>
                            <div class="slider-control">
                                <span class="slider-label">Batas Atas (b):</span>
                                <input type="range" class="slider-input" id="riemannB" min="1" max="5" step="0.5" value="2">
                                <span class="slider-value" id="valB">2</span>
                            </div>

                            <svg id="riemannSvg" class="graph-svg" viewBox="0 0 400 300">
                                <defs><pattern id="gridInt" width="20" height="20" patternUnits="userSpaceOnUse"><path d="M 20 0 L 0 0 0 20" fill="none" class="grid-line"/></pattern></defs>
                                <rect width="100%" height="100%" fill="url(#gridInt)"/>
                                
                                <!-- Axes -->
                                <line x1="40" y1="250" x2="380" y2="250" class="axis"/>
                                <line x1="40" y1="20" x2="40" y2="260" class="axis"/>
                                
                                <!-- Exact Area Fill -->
                                <path id="exactArea" class="area-exact" d=""/>
                                
                                <!-- Function Curve -->
                                <path id="funcCurve" class="func-line" d=""/>
                                
                                <!-- Riemann Rects -->
                                <g id="riemannGroup"></g>
                                
                                <!-- Labels -->
                                <text x="200" y="285" text-anchor="middle" fill="var(--text-secondary)" font-size="12">x</text>
                                <text x="20" y="150" text-anchor="middle" fill="var(--text-secondary)" font-size="12" transform="rotate(-90 20 150)">y</text>
                            </svg>
                        </div>

                        <div class="result-box">
                            <div class="result-row">
                                <span class="result-label">Luas Approksimasi (Jumlah Kotak):</span>
                                <span class="result-val" id="resApprox" style="color:#3498db">0.00</span>
                            </div>
                            <div class="result-row" style="margin-top:10px; padding-top:10px; border-top:1px solid var(--border-light);">
                                <span class="result-label">Luas Eksak (Integral):</span>
                                <span class="result-val" style="color:#2ecc71">2.67</span>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Example Problems -->
                <section class="content-section" id="contoh-soal">
                    <div class="section-header"><h2 class="section-title">Contoh Soal</h2></div>

                    <div class="example-card">
                        <div class="example-header"><span class="example-number">1</span><span class="example-title">Integral Substitusi</span></div>
                        <div class="example-body">
                            <p class="example-question">Hitung nilai dari ∫ 2x (x² + 1)³ dx.</p>
                            <div class="solution-steps">
                                <div class="solution-step"><span class="step-marker">1</span><div class="step-content">
                                    <span class="step-label">Substitusi</span>
                                    <p class="step-text">u = x² + 1 → du/dx = 2x → du = 2x dx.</p>
                                </div></div>
                                <div class="solution-step"><span class="step-marker">2</span><div class="step-content">
                                    <span class="step-label">Ganti Variabel</span>
                                    <span class="step-math">∫ u³ du</span>
                                </div></div>
                                <div class="solution-step"><span class="step-marker">3</span><div class="step-content">
                                    <span class="step-label">Integrasikan</span>
                                    <span class="step-math">= <span class="fraction"><span class="fraction-numerator">u<sup>4</sup></span><span class="fraction-line"></span><span class="fraction-denominator">4</span></span> + C</span>
                                </div></div>
                                <div class="solution-step"><span class="step-marker">4</span><div class="step-content">
                                    <span class="step-label">Kembalikan ke x</span>
                                    <span class="step-math">= <span class="fraction"><span class="fraction-numerator">(x² + 1)<sup>4</sup></span><span class="fraction-line"></span><span class="fraction-denominator">4</span></span> + C</span>
                                </div></div>
                            </div>
                            <div class="example-answer"><svg class="answer-icon">...</svg><span class="answer-text">1/4 (x² + 1)⁴ + C</span></div>
                        </div>
                    </div>
                </section>

                <!-- Practice Problems -->
                <section class="content-section" id="latihan-soal">
                    <div class="section-header"><h2 class="section-title">Latihan Soal</h2></div>
                    <div class="practice-grid">
                        <div class="practice-item"><span class="practice-number">1</span><div class="practice-content"><p class="practice-question">Tentukan hasil dari ∫ (3x² - 4x + 5) dx.</p></div></div>
                        <div class="practice-item"><span class="practice-number">2</span><div class="practice-content"><p class="practice-question">Hitung luas daerah yang dibatasi y = x², sumbu X, x=0, dan x=2.</p></div></div>
                        <div class="practice-item"><span class="practice-number">3</span><div class="practice-content"><p class="practice-question">Selesaikan ∫ cos(2x) dx.</p></div></div>
                    </div>
                </section>

                <!-- Quiz Section -->
                <section class="content-section" id="kuis">
                    <div class="section-header"><h2 class="section-title">Kuis</h2></div>
                    <div id="quizContainer"></div>
                </section>
            </div>
        </main>
        <footer class="footer">...</footer>
    </div>

    <script src="../matematika-wajib/script.js"></script>
    <script src="../matematika-wajib/quiz-engine.js"></script>
    <script>
        const quizQuestions = [
            { question: "Hasil dari ∫ 4x³ dx adalah...", options: ["x⁴", "12x²", "x⁴ + C", "x³"], correct: 2, explanation: "Integral pangkat: naikkan pangkat, bagi dengan pangkat baru, tambah C." },
            { question: "Nilai dari ∫₀² 3x² dx adalah...", options: ["6", "8", "24", "0"], correct: 1, explanation: "F(x) = x³. F(2)-F(0) = 8 - 0 = 8." },
            { question: "Jika ∫ f(x) dx = F(x), maka F'(x) = ...", options: ["f(x)", "F(x)", "∫ f(x) dx", "0"], correct: 0, explanation: "Integral adalah kebalikan turunan." },
            { question: "Luas daerah di bawah kurva y=x dari x=0 sampai x=2 adalah...", options: ["0", "1", "2", "4"], correct: 2, explanation: "Luas = ∫₀² x dx = [1/2 x²]₀² = 2." }
        ];

        document.addEventListener('DOMContentLoaded', function() {
            new QuizEngine('quizContainer', quizQuestions).init();
            
            const quickNav = document.getElementById('quickNav');
            window.addEventListener('scroll', () => quickNav.classList.toggle('scrolled', window.scrollY > 200));

            // --- Riemann Sum Logic ---
            const sliderN = document.getElementById('riemannN');
            const sliderB = document.getElementById('riemannB');
            const riemannGroup = document.getElementById('riemannGroup');
            const funcCurve = document.getElementById('funcCurve');
            const exactArea = document.getElementById('exactArea');
            const resApprox = document.getElementById('resApprox');
            
            // SVG Params
            // x: 0 to 5 maps to 40 to 380 (width 340). Scale = 68px/unit.
            // y: 0 to 10 maps to 250 to 20 (height 230). Scale = 23px/unit.
            // Origin (0,0) is at SVG coords (40, 250).
            const O = {x: 40, y: 250};
            const scaleX = 68;
            const scaleY = 23;
            const func = (x) => x*x;

            function updateRiemann() {
                const n = parseInt(sliderN.value);
                const b = parseFloat(sliderB.value);
                const a = 0;
                
                document.getElementById('valN').textContent = n;
                document.getElementById('valB').textContent = b;

                const dx = (b - a) / n;
                let totalArea = 0;
                let rectsHtml = "";

                for(let i=0; i<n; i++) {
                    const x = a + (i * dx); // Left endpoint
                    // const x = a + ((i + 0.5) * dx); // Midpoint (better approximation)
                    const y = func(x);
                    const rectWidth = dx * scaleX;
                    const rectHeight = y * scaleY;
                    
                    totalArea += y * dx;

                    const rx = O.x + (x * scaleX);
                    const ry = O.y - rectHeight;
                    rectsHtml += `<rect x="${rx}" y="${ry}" width="${rectWidth}" height="${rectHeight}" class="riemann-rect"/>`;
                }
                riemannGroup.innerHTML = rectsHtml;

                // Draw Curve and Exact Area
                let dPath = "M " + O.x + " " + O.y;
                let dExact = `M ${O.x} ${O.y} L ${O.x + (b*scaleX)} ${O.y}`;
                for(let px=0; px<=b; px+=0.05) {
                    const py = func(px);
                    const sx = O.x + (px * scaleX);
                    const sy = O.y - (py * scaleY);
                    dPath += ` L ${sx} ${sy}`;
                    dExact += ` L ${sx} ${sy}`;
                }
                dExact += ` Z`; // Close path for fill
                funcCurve.setAttribute('d', dPath);
                exactArea.setAttribute('d', dExact);

                // Calculate Exact Area (integral of x^2 is x^3/3)
                const exactVal = (Math.pow(b, 3)/3) - (Math.pow(a, 3)/3);
                
                resApprox.textContent = totalArea.toFixed(3);
                document.querySelector('.result-box .result-val[style*="green"]').textContent = exactVal.toFixed(3);
            }

            if(sliderN) { sliderN.oninput = updateRiemann; sliderB.oninput = updateRiemann; updateRiemann(); }
        });
    </script>
</body>
</html>